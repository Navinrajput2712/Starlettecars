<!-- Booking Details Modal Content -->
<div class="relative">
    <!-- Close Button -->
    <div class="absolute top-0 right-0">
        <button onclick="document.getElementById('bookingDetailsModal').classList.add('hidden')" class="text-gray-400 hover:text-gray-600 transition duration-200">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
            </svg>
        </button>
    </div>

    <!-- Modal Header -->
    <div class="text-center mb-6">
        <h3 class="text-2xl font-bold text-gray-900">Booking Details</h3>
        <p class="text-gray-600">Receipt #{{ booking.id|stringformat:"06d" }}</p>
    </div>

    <!-- Vehicle Image and Basic Info -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
        <div>
            <img 
                src="/media/{{ booking.vehicle_id.buss_vehicle_photo }}" 
                alt="{{ booking.vehicle_id.buss_vehicle_company_name }} {{ booking.vehicle_id.buss_vehicle_model }}" 
                class="w-full h-48 object-cover rounded-lg"
            />
        </div>
        <div>
            <h4 class="text-xl font-bold text-gray-900 mb-3">
                {{ booking.vehicle_id.buss_vehicle_company_name }} {{ booking.vehicle_id.buss_vehicle_model }}
            </h4>
            
            <!-- Status Badge -->
            <div class="mb-4">
                {% if booking.is_cancelled %}
                    <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-800">
                        <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Cancelled
                    </span>
                {% elif booking.status == 'pending' %}
                    <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-yellow-100 text-yellow-800">
                        <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                        </svg>
                        Pending
                    </span>
                {% elif booking.status == 'approved' %}
                    <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800">
                        <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                        </svg>
                        Approved
                    </span>
                {% elif booking.status == 'completed' %}
                    <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800">
                        <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                        </svg>
                        Completed
                    </span>
                {% elif booking.status == 'rejected' %}
                    <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-800">
                        <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Rejected
                    </span>
                {% endif %}
            </div>

            <!-- Vehicle Specs -->
            <div class="space-y-2">
                <div class="flex items-center text-gray-700">
                    <svg class="w-4 h-4 mr-3 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"></path>
                    </svg>
                    <span class="text-sm">{{ booking.vehicle_id.buss_vehicle_type }}</span>
                </div>
                <div class="flex items-center text-gray-700">
                    <svg class="w-4 h-4 mr-3 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM21 5a2 2 0 00-2-2h-4a2 2 0 00-2 2v12a4 4 0 004 4h4a2 2 0 002-2V5z"></path>
                    </svg>
                    <span class="text-sm">{{ booking.vehicle_id.buss_vehicle_color }}</span>
                </div>
                <div class="flex items-center text-gray-700">
                    <svg class="w-4 h-4 mr-3 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    <span class="text-sm font-mono">{{ booking.vehicle_id.buss_vehicle_number }}</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Detailed Information -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Booking Information -->
        <div class="bg-gray-50 p-4 rounded-lg">
            <h5 class="font-semibold text-gray-900 mb-3">Booking Information</h5>
            <div class="space-y-3">
                <div class="flex justify-between">
                    <span class="text-gray-600">Booking Date:</span>
                    <span class="font-medium">{{ booking.booking_date|date:"F d, Y" }}</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-gray-600">Rental Period:</span>
                    <span class="font-medium">{{ booking.from_duration }} to {{ booking.from_to }}</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-gray-600">Payment Method:</span>
                    <span class="font-medium capitalize">{{ booking.payment_method }}</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-gray-600">Payment Status:</span>
                    <span class="font-medium {% if booking.paystatus %}text-green-600{% else %}text-red-600{% endif %}">
                        {% if booking.paystatus %}Paid{% else %}Pending{% endif %}
                    </span>
                </div>
                {% if booking.approval_date %}
                <div class="flex justify-between">
                    <span class="text-gray-600">Approval Date:</span>
                    <span class="font-medium">{{ booking.approval_date|date:"F d, Y" }}</span>
                </div>
                {% endif %}
                {% if booking.is_cancelled and booking.cancelled_at %}
                <div class="flex justify-between">
                    <span class="text-gray-600">Cancellation Date:</span>
                    <span class="font-medium text-red-600">{{ booking.cancelled_at|date:"F d, Y" }}</span>
                </div>
                {% endif %}
            </div>
        </div>

        <!-- Vehicle Information -->
        <div class="bg-gray-50 p-4 rounded-lg">
            <h5 class="font-semibold text-gray-900 mb-3">Vehicle Information</h5>
            <div class="space-y-3">
                <div class="flex justify-between">
                    <span class="text-gray-600">Company:</span>
                    <span class="font-medium">{{ booking.vehicle_id.buss_vehicle_company_name }}</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-gray-600">Model:</span>
                    <span class="font-medium">{{ booking.vehicle_id.buss_vehicle_model }}</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-gray-600">Type:</span>
                    <span class="font-medium">{{ booking.vehicle_id.buss_vehicle_type }}</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-gray-600">Color:</span>
                    <span class="font-medium">{{ booking.vehicle_id.buss_vehicle_color }}</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-gray-600">Number:</span>
                    <span class="font-medium font-mono">{{ booking.vehicle_id.buss_vehicle_number }}</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-gray-600">Location:</span>
                    <span class="font-medium">{{ booking.vehicle_id.buss_vehicle_location }}</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Pricing Information -->
    <div class="mt-6 bg-blue-50 p-4 rounded-lg">
        <h5 class="font-semibold text-gray-900 mb-3">Pricing Information</h5>
        <div class="space-y-2">
            <div class="flex justify-between">
                <span class="text-gray-600">Total Amount:</span>
                <span class="text-2xl font-bold text-gray-900">â‚¹{{ booking.amount }}</span>
            </div>
            <div class="text-sm text-gray-500 text-center">18% GST included</div>
        </div>
    </div>

    <!-- Action Buttons -->
    <div class="mt-6 flex flex-col sm:flex-row gap-3">
        {% if not booking.is_cancelled and booking.status != 'rejected' and booking.status != 'completed' %}
            <a 
                href="/cancelbooking/{{ booking.id }}" 
                class="flex-1 inline-flex items-center justify-center px-4 py-2 border border-red-300 text-sm font-medium rounded-lg text-red-700 bg-red-50 hover:bg-red-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition duration-200"
            >
                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
                Cancel Booking
            </a>
        {% endif %}
        
        {% if booking.status == 'approved' %}
            <div class="flex flex-col sm:flex-row gap-3 flex-1">
                <form action="{% url 'rental_receipt' %}" method="post" class="flex-1">
                    {% csrf_token %}
                    <input type="hidden" name="bookedid" value="{{ booking.id }}" />
                    <button 
                        type="submit" 
                        class="w-full inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition duration-200"
                    >
                        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                        </svg>
                        View Receipt
                    </button>
                </form>
                
                <form action="{% url 'download_generate_rental_receipt_as_pdf' %}" method="post">
                    {% csrf_token %}
                    <input type="hidden" name="bookedid" value={{ booking.id }}>
                    <button type="submit" class="w-full inline-flex items-center justify-center px-4 py-2 border border-green-300 text-sm font-medium rounded-lg text-green-700 bg-green-50 hover:bg-green-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition duration-200">
                        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                        </svg>
                        Download Receipt
                    </button>
                </form>
            </div>
        {% endif %}
    </div>
</div> 